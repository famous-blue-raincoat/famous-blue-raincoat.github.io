(function(f,e){if(!f){console.error("please import jQuery or Zepto first!");return false}var d={"emoLib":[{"path":"arclist/","postfix":"gif","number":75}],"input":"#input",};var a='<div id="emo">{{imgs}}</div>';var g='<img src="{{path}}{{num}}.{{postfix}}" onclick="$.insertAtCaret({{num}})" />';f.fn.emotion=function(h){d=f.extend({},d,h);f("body").append(c(a,{"imgs":function(){var i="";for(var j in d.emoLib){i+=c(g,{"path":d.emoLib[j].path,"num":function(k){return k+1},"postfix":d.emoLib[j].postfix},d.emoLib[j].number)}return i}}));f(this).click(function(i){f("#emo").toggle()})};f.emoEncode=function(h){return h.replace(/<img src="[\w]*\/([0-9]*).[\w]{3}">/g,"[em_$1]")};f.emoDecode=function(h){return h.replace(/\[em_([0-9]*)\]/g,function(j,i){var k=b(i);return c('<img src="{{path}}{{num}}.{{postfix}}">',{"path":k.path,"num":i,"postfix":k.postfix})})};f.insertAtCaret=function(k){var p=b(k);var n=c('<img src="{{path}}{{num}}.{{postfix}}" />',{"path":p.path,"num":k,"postfix":p.postfix});var m=f(d.input)[0];var h,l;if(!m.hasfocus){m.focus()}if(e.getSelection&&e.getSelection().getRangeAt){h=e.getSelection().getRangeAt(0);h.collapse(false);l=h.createContextualFragment(n);var o=l.lastChild;h.insertNode(l);if(o){h.setEndAfter(o);h.setStartAfter(o)}var i=e.getSelection();i.removeAllRanges();i.addRange(h)}else{if(document.selection&&document.selection.createRange){document.selection.createRange().pasteHTML(n)}}};var c=function(h,m,l){var j="";var l=l||1;for(var k=0;k<l;k++){j+=h.replace(/{{[\w]+}}/g,function(n,i){var o=m[n.replace(/[{}]/g,"")];if(typeof o==="function"){return o.call(this,k)}else{return o}})}return j};var b=function(h){var k=null;var i=0;for(var j in d.emoLib){i+=d.emoLib[j].number;if(h<=i){k=d.emoLib[j];break}}return k}})(window.jQuery||window.Zepto,window);